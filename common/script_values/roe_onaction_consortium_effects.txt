onaction_consortium_calculation = {
    # CONSORTIUM Calculations
    if = {
        limit = {
            global_var:var_consortium_memberlist = {
                exists = yes
            }
        }
        set_global_variable = {
            name = var_consortium_memberlist
            value = 0
        }
        every_country = {
            limit = {
                has_variable = consortium_member
            }
            change_global_variable = {
                name = var_consortium_memberlist
                add = 1
            }
        }
    }
    #CONSORTIUM Voting for AI
    if = {
        limit = {
            has_variable = consortium_member
        }
        trigger_event = consortium_ai_voting.1
        trigger_event = consortium_ai_voting.2
    }
}

onaction_consortium_application = {
    # CONSORTIUM Applications
    if = {
        limit = {
            has_variable = application_progress_concord
        }
        add_to_global_variable_list = {
            name = consortium_application_list
            target = THIS
        }
    }
    if = {
        limit = {
            has_variable = application_progress_concord
            application_progress_concord <= 100
        }
        change_variable = {
            name = application_progress_concord
            add = 3
        }
    }
    if = {
        limit = {
            has_variable = application_progress_concord
            application_progress_concord <= 100
            supporting_countries > required_support_concord
        }
        change_variable = {
            name = application_progress_concord
            add = 2
        }
    }
    if = {
        limit = {
            has_variable = application_progress_concord
            application_progress_concord >= 100
            application_progress_concord <= 150
        }
        change_variable = {
            name = application_progress_concord
            add = 1
        }
    }
    if = {
        limit = {
            has_variable = application_progress_concord
            var:application_progress_concord >= 100
            supporting_countries >= required_support_concord
        }
        effect_consortium_application_approved = yes
        rebuild_consortium_memberlist = yes
        trigger_event = consortium_dynamic_resolution_events.4
    }
    if = {
        limit = {
            has_variable = application_progress_concord
            var:application_progress_concord >= 150
            not = {
                supporting_countries >= required_support_concord
            }
        }
        effect_consortium_application_rejected = yes
        trigger_event = consortium_dynamic_resolution_events.5
    }
}
